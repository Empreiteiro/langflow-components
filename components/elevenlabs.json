{"data":{"edges":[],"nodes":[{"data":{"node":{"template":{"_type":"Component","api_key":{"load_from_db":true,"required":true,"placeholder":"","show":true,"name":"api_key","value":"ELEVENLABS_API","display_name":"API Key","advanced":false,"input_types":[],"dynamic":false,"info":"Your ElevenLabs API key.","title_case":false,"password":true,"type":"str","_input_type":"SecretStrInput"},"code":{"type":"code","required":true,"placeholder":"","list":false,"show":true,"multiline":true,"value":"from langflow.custom import Component\r\nfrom langflow.io import StrInput, SecretStrInput, Output\r\nfrom langflow.schema import Data\r\nimport requests\r\n\r\nclass ElevenLabsAudioGenerator(Component):\r\n    display_name = \"ElevenLabs Audio Generator\"\r\n    description = \"Generates audio using ElevenLabs Text-to-Speech API.\"\r\n    icon = \"volume-high\"\r\n    name = \"ElevenLabsAudioGenerator\"\r\n    field_order = [\"api_key\", \"voice_id\", \"text\", \"model_id\"]\r\n\r\n    inputs = [\r\n        SecretStrInput(\r\n            name=\"api_key\",\r\n            display_name=\"API Key\",\r\n            required=True,\r\n            info=\"Your ElevenLabs API key.\"\r\n        ),\r\n        StrInput(\r\n            name=\"voice_id\",\r\n            display_name=\"Voice ID\",\r\n            required=True,\r\n            info=\"The ID of the voice to use. You can find this in your ElevenLabs dashboard.\"\r\n        ),\r\n        MultilineInput(\r\n            name=\"text\",\r\n            display_name=\"Text\",\r\n            required=True,\r\n            info=\"The text you want to convert to speech.\"\r\n        ),\r\n        StrInput(\r\n            name=\"model_id\",\r\n            display_name=\"Model ID\",\r\n            required=False,\r\n            value=\"eleven_monolingual_v1\",\r\n            info=\"Optional model ID to use for synthesis. Defaults to 'eleven_monolingual_v1'.\"\r\n        ),\r\n    ]\r\n\r\n    outputs = [\r\n        Output(name=\"audio\", display_name=\"Generated Audio\", method=\"generate_audio\")\r\n    ]\r\n\r\n    def generate_audio(self) -> Data:\r\n        try:\r\n            url = f\"https://api.elevenlabs.io/v1/text-to-speech/{self.voice_id}\"\r\n            api_key = self.api_key.get_secret_value() if hasattr(self.api_key, \"get_secret_value\") else self.api_key\r\n            headers = {\r\n                \"xi-api-key\": api_key,\r\n                \"Content-Type\": \"application/json\",\r\n                \"Accept\": \"audio/mpeg\"\r\n            }\r\n            payload = {\r\n                \"text\": self.text,\r\n                \"model_id\": self.model_id or \"eleven_monolingual_v1\",\r\n                \"voice_settings\": {\r\n                    \"stability\": 0.5,\r\n                    \"similarity_boost\": 0.75\r\n                }\r\n            }\r\n\r\n            self.log(f\"Sending request to ElevenLabs API for voice ID: {self.voice_id}\")\r\n            response = requests.post(url, headers=headers, json=payload)\r\n            response.raise_for_status()\r\n\r\n            self.log(\"Audio generated successfully.\")\r\n            return Data(binary_data=response.content, mime_type=\"audio/mpeg\")\r\n\r\n        except requests.exceptions.RequestException as e:\r\n            error_msg = f\"Error communicating with ElevenLabs API: {e}\"\r\n            self.status = error_msg\r\n            self.log(error_msg)\r\n            return Data.from_text(error_msg)\r\n\r\n        except Exception as e:\r\n            error_msg = f\"Unexpected error: {str(e)}\"\r\n            self.status = error_msg\r\n            self.log(error_msg)\r\n            return Data.from_text(error_msg)","fileTypes":[],"file_path":"","password":false,"name":"code","advanced":true,"dynamic":true,"info":"","load_from_db":false,"title_case":false},"model_id":{"tool_mode":false,"trace_as_metadata":true,"load_from_db":false,"list":false,"list_add_label":"Add More","required":false,"placeholder":"","show":true,"name":"model_id","value":"eleven_multilingual_v2","display_name":"Model ID","advanced":false,"dynamic":false,"info":"Optional model ID to use for synthesis. Defaults to 'eleven_monolingual_v1'.","title_case":false,"type":"str","_input_type":"StrInput"},"text":{"tool_mode":false,"trace_as_input":true,"multiline":true,"trace_as_metadata":true,"load_from_db":false,"list":false,"list_add_label":"Add More","required":true,"placeholder":"","show":true,"name":"text","value":"Ol√°, boa tarde!","display_name":"Text","advanced":false,"input_types":["Message"],"dynamic":false,"info":"The text you want to convert to speech.","title_case":false,"copy_field":false,"type":"str","_input_type":"MultilineInput"},"voice_id":{"tool_mode":false,"trace_as_metadata":true,"load_from_db":false,"list":false,"list_add_label":"Add More","required":true,"placeholder":"","show":true,"name":"voice_id","value":"v3a2WxCpk7965Lwrexlc","display_name":"Voice ID","advanced":false,"dynamic":false,"info":"The ID of the voice to use. You can find this in your ElevenLabs dashboard.","title_case":false,"type":"str","_input_type":"StrInput"}},"description":"Generates audio using ElevenLabs Text-to-Speech API.","icon":"volume-high","base_classes":["Data"],"display_name":"ElevenLabs Audio Generator","documentation":"","minimized":false,"custom_fields":{},"output_types":[],"pinned":false,"conditional_paths":[],"frozen":false,"outputs":[{"types":["Data"],"selected":"Data","name":"audio","hidden":false,"display_name":"Generated Audio","method":"generate_audio","value":"__UNDEFINED__","cache":true,"required_inputs":null,"allows_loop":false,"options":null,"tool_mode":true}],"field_order":["api_key","voice_id","text","model_id"],"beta":false,"legacy":false,"edited":true,"metadata":{},"tool_mode":false,"lf_version":"1.3.4","official":false},"showNode":true,"type":"ElevenLabsAudioGenerator","id":"CustomComponent-Sb6XJ"},"id":"CustomComponent-Sb6XJ","position":{"x":0,"y":0},"type":"genericNode"}],"viewport":{"x":1,"y":1,"zoom":1}},"description":"Generates audio using ElevenLabs Text-to-Speech API.","name":"ElevenLabs Audio Generator","id":"CustomComponent-Sb6XJ","is_component":true,"last_tested_version":"1.3.4"}
